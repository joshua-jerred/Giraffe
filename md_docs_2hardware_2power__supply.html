<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Giraffe: Giraffe Flight Computer Power Supply</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
</script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
</script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">
    DoxygenAwesomeParagraphLink.init()
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Giraffe
   &#160;<span id="projectnumber">0.8.0</span>
   </div>
   <div id="projectbrief">A Unified High Altitude Flight Observation and Control System. With homogeneous software and hardware, both on the ground and in the air.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part --><!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_docs_2hardware_2power__supply.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Giraffe Flight Computer Power Supply</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md103"></a> The power supply for GFC is responsible for taking the input voltage from the battery and creating a stable 5V and 3.3V output for the whole system.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md104"></a>
Update 16 Mar 2025</h1>
<p>Switched to a 18650 topology to better fit the Pi Zero form factor.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md105"></a>
Requirements</h1>
<h2><a class="anchor" id="autotoc_md106"></a>
Power Output and Consumption</h2>
<p>The raspberry pi zero 2 W requires 5V to operate and has a maximum tolerance of 5%. The Raspberry Pi Zero 2 W idles at 280ma and under load can consume up to 600ma. Due to the computational requirements of the flight software, a duty cycle of 95% should be assumed.</p>
<p>The radio module, SA868 can operate from 3.3V to 5.5V. The radio module requires 1000ma to transmit at high power when at 5V, 900 at 4.2V. At low transmit power, the module consumes 550ma at 5V and 450ma at 4.2V. In receive mode, the module consumes 70ma. The radio module should be assumed to be in receive mode when not transmitting. Assuming a possible configuration of APRS location and telemetry packets transmitted (3s, 1 per minute), two way telemetry packets (3s, 1 per minute), Robot36 SSTV images (36s, every 10 minutes), a realistic upper bound duty cycle is 15%.</p>
<p>The Pi camera module requires 250ma to operate. This needs to be tested, but for now assume that it takes 3 seconds to power on, take a picture, and power off. If a picture is taken every 30 seconds, the duty cycle is 10%, so ~25ma.</p>
<p>As things are still changing, there is no point in trying to calculate the power consumption of the other onboard ICs. After a quick run through, it should be less 200ma at peak. This needs to be tested.</p>
<p>The flight hardware does have connectors for external sensors. The DS18B20 sensors are negligible. There is a single I2C connector available for expansion. 100ma should be allocated for this. This also means that the Pi's 3.3V rail can not be used for the 3.3V components.</p>
<p>The following table summarizes the power consumption of the components. <b>Note</b>: The table below does not distinguish between 3.3V and 5V components. The 3.3V components are are a small fraction of the total power consumption.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Base Current (ma)   </th><th class="markdownTableHeadNone">Peak Current (ma)   </th><th class="markdownTableHeadNone">Duty Cycle   </th><th class="markdownTableHeadNone">Average Current (ma)    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Raspberry Pi Zero 2 W   </td><td class="markdownTableBodyNone">280   </td><td class="markdownTableBodyNone">600   </td><td class="markdownTableBodyNone">95%   </td><td class="markdownTableBodyNone">584   </td></tr>
</table>
<p>| Pi Camera Module | 0 | 250 | 5% | 25 | | Other Onboard ICs | 50 | 200 | 5% | 125 | | External Sensors | 0 | 100 | 5% | 5 | | <b>Total</b> | <b>400</b> | <b>1150</b> | | <b>949</b> |</p>
<ul>
<li>REQ: The battery voltage will be regulated to 5V with a buck or boost converter, dependant on pack configuration.</li>
<li>REQ: The 5V regulator must be able to supply at least 2.5A.</li>
<li>REQ: The 3.3V bus will be regulated from the 5V bus with an LDO.</li>
<li>REQ: The acceptable voltage tolerance of 3.3V and 5V bus is 5%.</li>
<li>REQ: The power supply will have current sensing.</li>
</ul>
<h2><a class="anchor" id="autotoc_md107"></a>
Battery Cells</h2>
<p>The battery cells should be Lithium-Ion cells. Of the form factors available, cylindrical cells provide safety benefits over pouch cells. There should be consideration of the battery being in vacuum and impacting the ground. Looking at the available form factors, 18650 and 21700 cells are the most widely available. The 21700 cells have a higher energy density. Given energy density, decent safety, and availability, NMC/INR cells should be used. The cells should be from a reputable manufacturer as there are many poor quality products out there. Capacity should be the priority over current rating as this is a fairly low power system.</p>
<p><a href="https://archive.org/details/httpsntrs.nasa.govapicitations20100037250downloads20100037250.pdf">https://archive.org/details/httpsntrs.nasa.govapicitations20100037250downloads20100037250.pdf</a> <a href="https://www.batterypowertips.com/18650-21700-30700-4680-and-other-li-ions-whats-the-difference-faq/">https://www.batterypowertips.com/18650-21700-30700-4680-and-other-li-ions-whats-the-difference-faq/</a> <a href="https://blog.satsearch.co/2021-06-23-satellite-batteries-for-cubesats-nanosats-and-other-form-factors">https://blog.satsearch.co/2021-06-23-satellite-batteries-for-cubesats-nanosats-and-other-form-factors</a> <a href="https://web.archive.org/web/20240405003314/https://www.thunderheartreviews.com/2021/12/samsung-21700-50G-48G-50E-test-comparison.html">https://web.archive.org/web/20240405003314/https://www.thunderheartreviews.com/2021/12/samsung-21700-50G-48G-50E-test-comparison.html</a> <a href="https://batteryuniversity.com/article/bu-302-series-and-parallel-battery-configurations">https://batteryuniversity.com/article/bu-302-series-and-parallel-battery-configurations</a></p>
<ul>
<li>REQ: The battery cells must be 21700 NMC/INR cylindrical Lithium-Ion cells.</li>
<li>REQ: The battery cells must have a capacity of at least 4000mAh.</li>
<li>REQ: The battery cells must be from a reputable manufacturer and distributor.</li>
</ul>
<h2><a class="anchor" id="autotoc_md108"></a>
Cell Configuration and Power Supply Architecture</h2>
<p>Depending on the battery cell configuration, the power supply architecture will change. The battery configurations that can be considered are 1S2P, 2S1P, and 2S2P. The 1S2P configuration would require a boost converter and a single ADC channel to monitor the battery voltage. The 2S1P/2S2P configurations would require a buck converter and two ADC channels, or a BMS, to monitor the battery.</p>
<ul>
<li>REQ: The battery pack must weigh less than 350g</li>
</ul>
<h2><a class="anchor" id="autotoc_md109"></a>
Pack Design</h2>
<h2><a class="anchor" id="autotoc_md110"></a>
Battery Management</h2>
<ul>
<li>REQ: The battery SOC should be considered 100% at 4.2V and 0% at 3.0V</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md111"></a>
Design</h1>
<h2><a class="anchor" id="autotoc_md112"></a>
Battery</h2>
<p>Going with a 2SxP configuration, the power supply will consist of a buck converter.</p>
<p>Tentatively, the cell choice is INR21700-50E, which has is 17Wh at a 2A draw.</p>
<h2><a class="anchor" id="autotoc_md113"></a>
Current Sensing</h2>
<p>High side current sensing will be used with the shunt resistor placed between the battery and the buck converter.</p>
<p>Currently looking at the INA226 for current sensing.</p>
<p>INA180A</p>
<h2><a class="anchor" id="autotoc_md114"></a>
Buck-Converter</h2>
<p>Decided on the TPS56320X, specifically the TPS563201. For $0.43, it meets all requirements, goes up to 3A, and comes in a easier to use SOT-23 (Thin) package.</p>
<p>The TPS563201 specifically uses Pulse Skip Mode, because it's not CCM it does not have a fixed frequency. The hope is that this will not be an issue EMI/EMC wise. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
